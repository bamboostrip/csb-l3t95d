(function(t){function e(e){for(var i,r,a=e[0],d=e[1],u=e[2],c=0,h=[];c<a.length;c++)r=a[c],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(t[i]=d[i]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,a=1;a<s.length;a++){var d=s[a];0!==n[d]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},n={app:0},o=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=d;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"game-box"},[e("div",{staticClass:"tools"},[e("button",{on:{click:t.playGame}},[t._v(" "+t._s(t.isPlaying?"停止":t.isLose?"重新开始":"开始")+" ")]),e("div",{staticClass:"info-bar"},[e("p",[t._v("🐍 的长度: "+t._s(t.snakeBodyList.length))])]),e("p",{staticClass:"count"},[t._v("得分: "+t._s(t.count))])]),e("div",{ref:"snake",staticClass:"snake"},[e("div",{ref:"snakeHeader",staticClass:"snake-header",style:{top:t.headerPos.y+"px",left:t.headerPos.x+"px"}}),t._l(t.snakeBodyList,(function({pos:{y:t,x:s},uuid:i}){return e("div",{key:i,staticClass:"snake-body",style:{top:t+"px",left:s+"px"},attrs:{uid:i}})}))],2),e("div",{staticClass:"snake-food",style:{top:t.foodPos.y+"px",left:t.foodPos.x+"px"}})])},o=[];const r={up:38,down:40,left:37,right:39},a=500,d=500,u=10;function l(t){return t===r.right||t===r.left}function c(t,e){const s={...t};switch(e){case r.up:s.y-=u;break;case r.down:s.y+=u;break;case r.left:s.x-=u;break;case r.right:s.x+=u;break;default:throw new Error("NotFind")}return s}function h(t,e){return t.some(({pos:t})=>e.x===t.x&&e.y===t.y)}function p(t,e){return t>=a||t<0||e>=d||e<0}function f(t,e){return e+(Math.random()*(t-e)/e>>>0)*e}var y={data:()=>({snakeBodyList:[],direction:void 0,lastInputDirection:void 0,lastPos:{},foodPos:{},isLose:!1,headerPos:{},isPlaying:!1,speed:100,id:0}),computed:{count(){return this.isPlaying?this.snakeBodyList.length-10:0}},mounted(){window.addEventListener("keydown",this.onKeydown)},methods:{init(){const t={x:250,y:250};this.direction=r.left,this.lastInputDirection=r.left,this.lastPos={...t,direction:this.direction},this.headerPos={...t},this.snakeBodyList=Array(u).fill(0).map(this.createBody)},createBody(){const{x:t,y:e}=this.lastPos,s=this.direction===r.up||this.direction===r.left,i={...c({x:t,y:e},s?this.direction+2:this.direction-2)};return this.lastPos=i,{uuid:this.id++,pos:i}},genFoot(){const t=f(a,u),e=f(d,u);h(this.snakeBodyList,{x:t,y:e})||p(t,e)?this.genFoot():this.foodPos={x:t,y:e}},onKeydown({keyCode:t}){[38,40,37,39].includes(t)&&l(t)!==l(this.direction)&&(this.lastInputDirection=t)},render(){const t=c(this.headerPos,this.lastInputDirection);if(p(t.x,t.y)||h(this.snakeBodyList,t))return this.isLose=!0,this.isPlaying=!1,clearTimeout(this._timer),console.log("你输了");const e=this.snakeBodyList.slice(0,this.snakeBodyList.length-1);e.unshift({pos:this.headerPos,uuid:this.id++}),this.headerPos=t,this.lastPos=e[e.length-1].pos,h(e,this.foodPos)&&(e.push(this.createBody()),this.genFoot()),this.snakeBodyList=e,this.direction=this.lastInputDirection,this._timer=setTimeout(()=>this.render(),this.speed)},playGame(){this.isPlaying?clearTimeout(this._timer):(this.isLose=!1,this.init(),this.genFoot(),this.render()),this.isPlaying=!this.isPlaying}}},g=y,v=(s("d2b1"),s("2877")),P=Object(v["a"])(g,n,o,!1,null,null,null),b=P.exports;i["a"].config.productionTip=!1,new i["a"]({render:t=>t(b)}).$mount("#app")},"6ee4":function(t,e,s){},d2b1:function(t,e,s){"use strict";s("6ee4")}});
//# sourceMappingURL=app.fd1cbe8b.js.map